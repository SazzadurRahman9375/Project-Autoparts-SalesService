<div class="view-container">
    <mat-card class="medium-form-card-container mat-elevation-z9">
      <mat-card-header>
        <mat-card-title>Create new Order</mat-card-title>
        <mat-card-subtitle>Fill up the form</mat-card-subtitle>
        <img src="../../../../assets/engine-svgrepo-com.svg" mat-card-avatar class="avatar" />
        <span class="filler"></span>
        
      </mat-card-header>

<mat-card class="form-card">
    <!-- <mat-card-header>
        <h2 mat-card-title>Create new Service Request</h2>
    </mat-card-header> -->
    <mat-card-content>
        <form [formGroup]="createForm" (ngSubmit)="save()">
            <mat-form-field class="f-w" >
                <mat-label>Customer</mat-label>
                <mat-select formControlName="customerId" >
                    <mat-option *ngFor="let type of customer" [value]="type.customerId">
                    {{type.customerName}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            <mat-form-field class="f-w fld">
                <mat-label>Order Date</mat-label>
                <input type="date" matInput formControlName="orderDate" />
                <mat-error *ngIf="f['orderDate'].hasError('orderDate')">
                    Order Date is required
                </mat-error>
            </mat-form-field>           
           
           
              <div style="display: flex;justify-content: flex-end;">
                <button type="button" mat-icon-button (click)="addDetail()" ><mat-icon>add</mat-icon></button>
              </div>
              <ng-container formArrayName="orderDetails"> 
                <ng-container *ngFor="let p of details.controls; let i = index">
                    <div [formGroupName]="i" class="detail-row">
                        <mat-form-field class="f-w" >
                            <mat-label>Product</mat-label>
                            <mat-select formControlName="productId" >
                                <mat-option *ngFor="let type of products" [value]="type.productId">
                                {{type.productName}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        <mat-form-field class="f-w">
                            <mat-label>Quantity</mat-label>
                            <input type="number" matInput
                                   formControlName="quantity">
                            <mat-error *ngIf="details.controls[i].get('quantity')?.hasError('required')">Quantity is <strong>required</strong></mat-error>
                          </mat-form-field>
                          
                          <div class="f-w right" style="padding-bottom: 12px;">
                            <button style="color: rgb(179, 29, 29);" type="button" mat-icon-button (click)="removeDetail(i)" ><mat-icon>delete</mat-icon></button>
                          </div>
        
                    </div>
                </ng-container>
              </ng-container>
            <div class="f-w fld">
                    <button [disabled]="createForm.invalid"  mat-raised-button color="primary">Save</button>
            </div>
        </form>
        <mat-card-actions>
          <a mat-button [routerLink]="['/order']" color="primary">Back to list</a>
      </mat-card-actions>
    </mat-card-content>
    
</mat-card>
</mat-card>
</div>



